{% extends 'base.login.html.twig' %}

{% block title %}
	{{ title }}
{% endblock %}

{% block body %}

	{% for flash_error in app.flashes('verify_email_error') %}
		<div class="alert alert-danger" id="flashErrors" role="alert"></div>
         <input type="hidden" name="flashErrors" id="flashErrors" class="flashErrors" value="{{ flash_error }}"></input>
	{% endfor %}

    {% if error %}
          <input type="hidden" name="flashMessages" id="flashMessages" value="{{ error.messageKey|trans(error.messageData, 'security') }}"></input>
    {% endif %}
	<!--begin::Wrapper-->
	<div class="w-lg-500px p-10 p-lg-15 mx-auto">
		<!--begin::Form-->
		<form class="form w-100" novalidate="novalidate" id="kt_sign_in_form" method="post">
			<!--begin::Heading-->
			<div
				class="text-center mb-10">
				<!--begin::Title-->
				<h1 class="text-dark mb-3">{% trans %}Se connecter{% endtrans %}</h1>
				<!--end::Title-->
				<!--begin::Link-->
				<div class="text-gray-400 fw-bold fs-4">{% trans %}Créer{% endtrans %}
					<a href="{{ path('app_register')}}" class="link-primary fw-bolder">{% trans %}un compte{% endtrans %}</a>
				</div>
				<!--end::Link-->
			</div>
			<!--begin::Heading-->
			<!--begin::Input group-->
			<div
				class="fv-row mb-10">
				<!--begin::Label-->
				<label class="form-label fs-6 fw-bolder text-dark">{% trans %}Email{% endtrans %}</label>
				<!--end::Label-->
				<!--begin::Input-->
				<input
				class="form-control form-control-lg form-control-solid" type="text" name="email" autocomplete="off" value="{{brand.emails.support}}"/>
			<!--end::Input-->
			</div>
			<!--end::Input group-->
			<!--begin::Input group-->
			<div
				class="fv-row mb-10">
				<!--begin::Wrapper-->
				<div
					class="d-flex flex-stack mb-2">
					<!--begin::Label-->
					<label class="form-label fw-bolder text-dark fs-6 mb-0">{% trans %}Mot de passe{% endtrans %}</label>
					<!--end::Label-->
					<!--begin::Link-->
					<a href="{{ path('app_login')}}" class="link-primary fs-6 fw-bolder">
                    {% trans %}Mot de passe oublié ?{% endtrans %}</a>
					<!--end::Link-->
				</div>
				<!--end::Wrapper-->
				<!--begin::Input-->
				<input class="form-control form-control-lg form-control-solid" type="password" name="password"  value="@21061AdminDefault"autocomplete="off"/>
                <input type="hidden" name="_csrf_token"  value="{{ csrf_token('authenticate') }}">
			<!--end::Input-->
			</div>
			<!--end::Input group-->
			<!--begin::Actions-->
			<div
				class="text-center">
				<!--begin::Submit button-->
				<button type="submit" id="kt_sign_in_submit" class="btn btn-lg btn-primary w-100 mb-5">
					<span class="indicator-label">{% trans %}Connexion{% endtrans %}</span>
					<span class="indicator-progress">{% trans %}Chargement...{% endtrans %}
						<span class="spinner-border spinner-border-sm align-middle ms-2"></span>
					</span>
				</button>
				<!--end::Submit button-->
			</div>
			<!--end::Actions-->
		</form>
		<!--end::Form-->
	</div>

{% endblock %}

{% block javascripts %}
	<!--begin::Page Custom Javascript(used by this page)-->
	<script>
		const login_url = "{{ path('app_login') }}";
	</script>
	<script src="{{ asset('app/js/queries/authentication/sign-in/general.js') }}"></script>
	<!--end::Page Custom Javascript-->
    <script>
			var flashErrors		=  	$('#flashErrors').val();
			var flashMessages	=  	$('#flashMessages').val();

			if(flashErrors 	!= 	undefined)
			{
				Swal.fire({
                        title: _Information,
                        text: flashErrors,
                        icon: "error",
                        buttonsStyling: false,
                        confirmButtonText:  _Form_Ok_Swal_Button_Text_Notification,
                        customClass: {
                            confirmButton: "btn btn-primary"
                        }
                });
			}

			if(flashMessages != 	undefined)
			{
				Swal.fire({
                        title: _Information,
                        text: flashMessages,
                        icon: "warning",
                        buttonsStyling: false,
                        allowOutsideClick: false,
                        confirmButtonText:  _Form_click_Swal_Button_Text_Notification,
                        customClass: {
                            confirmButton: "btn btn-primary"
                        }
                }).then(function (result) {
                    if (result.value) {
                        //location.reload(true);
                    }
                });
			}


    	</script>

{% endblock %}
