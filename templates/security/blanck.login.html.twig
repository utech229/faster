{#{% extends 'base.login.html.twig' %}

{% block title %}
	{{ title }}
{% endblock %}

{% block body %}

	{% for flash_error in app.flashes('verify_email_error') %}
		<div class="alert alert-danger" id="flashErrors" role="alert"></div>
         <input type="hidden" name="flashErrors" id="flashErrors" class="flashErrors" value="{{ flash_error }}"></input>
	{% endfor %}

    {% if error %}
          <input type="hidden" name="flashMessages" id="flashMessages" value="{{ error.messageKey|trans(error.messageData, 'security') }}"></input>
    {% endif %}
	<!--begin::Wrapper-->
	<div class="w-lg-500px p-10 p-lg-15 mx-auto">
		<!--begin::Form-->
		<form class="form w-100" novalidate="novalidate" id="kt_sign_in_form" method="post">
			<!--begin::Heading-->
			<div
				class="text-center mb-10">
				<!--begin::Title-->
				<h1 class="text-dark mb-3">{% trans %}Se connecter{% endtrans %}</h1>
				<!--end::Title-->
				{#<!--begin::Link-->
				<div class="text-gray-400 fw-bold fs-4">{% trans %}Nouveau ici ?{% endtrans %}
					<a href="{{ path('app_register')}}" class="link-primary fw-bolder">{% trans %}créer un compte{% endtrans %}</a>
				</div>
				<!--end::Link-->#
			</div>
			<!--begin::Heading-->
			<!--begin::Input group-->
			<div
				class="fv-row mb-10">
				<!--begin::Label-->
				<label class="form-label fs-6 fw-bolder text-dark">{% trans %}Email{% endtrans %}</label>
				<!--end::Label-->
				<!--begin::Input-->
				<input
				class="form-control form-control-lg form-control-solid" type="text" name="email" autocomplete="off" value="{{brand.emails.support}}"/>
			<!--end::Input-->
			</div>
			<!--end::Input group-->
			<!--begin::Input group-->
			<div
				class="fv-row mb-10">
				<!--begin::Wrapper-->
				<div
					class="d-flex flex-stack mb-2">
					<!--begin::Label-->
					<label class="form-label fw-bolder text-dark fs-6 mb-0">{% trans %}Mot de passe{% endtrans %}</label>
					<!--end::Label-->
					<!--begin::Link-->
					<a href="{{ path('app_login')}}" class="link-primary fs-6 fw-bolder">
                    {% trans %}Mot de passe oublié ?{% endtrans %}</a>
					<!--end::Link-->
				</div>
				<!--end::Wrapper-->
				<!--begin::Input-->
				<input class="form-control form-control-lg form-control-solid" type="password" name="password"  value="@21061AdminDefault"autocomplete="off"/>
                <input type="hidden" name="_csrf_token"  value="{{ csrf_token('authenticate') }}">
			<!--end::Input-->
			</div>
			<!--end::Input group-->
			<!--begin::Actions-->
			<div
				class="text-center">
				<!--begin::Submit button-->
				<button type="submit" id="kt_sign_in_submit" class="btn btn-lg btn-primary w-100 mb-5">
					<span class="indicator-label">{% trans %}Connexion{% endtrans %}</span>
					<span class="indicator-progress">{% trans %}Chargement...{% endtrans %}
						<span class="spinner-border spinner-border-sm align-middle ms-2"></span>
					</span>
				</button>
				<!--end::Submit button-->
				<!--begin::Separator-->
				<div class="text-center text-muted text-uppercase fw-bolder mb-5">or</div>
				<!--end::Separator-->
			</div>
			<!--end::Actions-->
		</form>
		<!--end::Form-->
	</div>

{% endblock %}

#}

{% extends 'base.login.html.twig' %}

{% block title %}{{ title }}{% endblock %}

{% block body %}
    
    {#<!--begin::Wrapper-->
    <div class="w-lg-600px bg-body rounded shadow-sm p-10 p-lg-15 mx-auto">
        <!--begin::Form-->
         {{ form_start(registrationForm,{'attr': {'class': 'form w-100','novalidate': 'novalidate','id':'kt_sign_up_form' }}) }}
            <!--begin::Heading-->
            <div class="mb-10 text-center">
                <!--begin::Title-->
                <h1 class="text-dark mb-3">{% trans %}Créer un compte {% endtrans %}</h1>
                <!--end::Title-->
                <!--begin::Link-->
                <div class="text-gray-400 fw-bold fs-4">{% trans %}Vous avez déjà un compte {% endtrans %}
                <a href="{{ path('app_login') }}" class="link-primary fw-bolder">{% trans %}se connecter {% endtrans %}</a></div>
                <!--end::Link-->
            </div>
            <!--end::Heading-->
            <!--begin::Action-->
            <button type="button" class="btn btn-light-primary fw-bolder w-100 mb-10">
            <img alt="Logo" src="{{ asset('app/media/svg/brand-logos/google-icon.svg') }}" class="h-20px me-3" />{% trans %}S'inscrire avec google {% endtrans %}</button>
            <!--end::Action-->
            <!--begin::Separator-->
            <div class="d-flex align-items-center mb-10">
                <div class="border-bottom border-gray-300 mw-50 w-100"></div>
                <span class="fw-bold text-gray-400 fs-7 mx-2">{% trans %}OU{% endtrans %}</span>
                <div class="border-bottom border-gray-300 mw-50 w-100"></div>
            </div>
            <!--end::Separator-->
            <!--begin::Input group-->
            <div class="row fv-row mb-7">
                <!--begin::Col-->
                <div class="col-xl-6">
                    <label class="form-label fw-bolder text-dark fs-6 required">{% trans %}Prénoms{% endtrans %}</label>
                     {{ form_row(registrationForm.firstName, {'attr': {'class': 'form-control form-control-lg form-control-solid',
                     'autocomplete':"off" ,'placeholder': '', 'value' : 'Enock', 'maxlength': '25' }}) }}
                </div>
                <!--end::Col-->
                <!--begin::Col-->
                <div class="col-xl-6">
                    <label class="form-label fw-bolder text-dark fs-6 required">{% trans %}Noms{% endtrans %}</label>
                    {{ form_row(registrationForm.lastName, {'attr': {'class': 'form-control form-control-lg form-control-solid',
                    'autocomplete':"off" ,'placeholder': '', 'value' : 'ATEDEKON', 'maxlength': '25' }}) }}
                    {{ form_row(registrationForm.referrerCode, {'attr': {'value' : ureferralCode }}) }}
                </div>
                <!--end::Col-->
            </div>
            <!--end::Input group-->
             <!--begin::Input group-->
            <div class="row fv-row mb-7">
                <!--begin::Col-->
                <div class="col-xl-6">
                    <label class="form-label fw-bolder text-dark fs-6 required">{% trans %}Email{% endtrans %}</label>
                    {{ form_row(registrationForm.email, {'attr': {'class': 'form-control form-control-lg form-control-solid',
                    'type': 'email','placeholder': 'monemail@...com' ,'value' : 'enockiatk@gmail.com' }}) }}
                </div>
                <!--end::Col-->
                <!--begin::Col-->
                <div class="col-xl-6">
                    <label class="form-label fw-bolder text-dark fs-6 required">{% trans %}Téléphone{% endtrans %} </label>
                    {{ form_row(registrationForm.phone, {'attr': {'class': 'form-control form-control-lg form-control-solid', 
                    'value' : '96117156', onkeyup:'verif_nombre(this)' }}) }}
                </div>
            </div>
            <!--end::Input group-->
            <!--begin::Input group-->
            <div class="mb-10 fv-row" data-kt-password-meter="true">
                <!--begin::Wrapper-->
                <div class="mb-1">
                    <!--begin::Label-->
                    <label class="form-label fw-bolder text-dark fs-6 required">{% trans %}Mot de passe{% endtrans %}</label>
                    <!--end::Label-->
                    <!--begin::Input wrapper-->
                    <div class="position-relative mb-3">
                        {{ form_row(registrationForm.plainPassword, {'attr': {'class': 'form-control form-control-lg form-control-solid',
                        value: '@21061AdminDefault','maxlength': '30' }}) }}
                        <span class="btn btn-sm btn-icon position-absolute translate-middle top-50 end-0 me-n2" data-kt-password-meter-control="visibility">
                            <i class="bi bi-eye-slash fs-2"></i>
                            <i class="bi bi-eye fs-2 d-none"></i>
                        </span>
                    </div>
                    <!--end::Input wrapper-->
                    <!--begin::Meter-->
                    <div class="d-flex align-items-center mb-3" data-kt-password-meter-control="highlight">
                        <div class="flex-grow-1 bg-secondary bg-active-success rounded h-5px me-2"></div>
                        <div class="flex-grow-1 bg-secondary bg-active-success rounded h-5px me-2"></div>
                        <div class="flex-grow-1 bg-secondary bg-active-success rounded h-5px me-2"></div>
                        <div class="flex-grow-1 bg-secondary bg-active-success rounded h-5px"></div>
                    </div>
                    <!--end::Meter-->
                </div>
                <!--end::Wrapper-->
                <!--begin::Hint-->
                <div class="text-muted">{% trans %}Utilisez 8 caractères ou plus avec un mélange de lettres, de chiffres et de symboles.{% endtrans %}</div>
                <!--end::Hint-->
            </div>
            <!--end::Input group=-->
            <!--begin::Input group-->
            <div class="fv-row mb-5">
                <label class="form-label fw-bolder text-dark fs-6 required">{% trans %}Confirmez le mot de passe{% endtrans %}</label>
                <input class="form-control form-control-lg form-control-solid" type="password" id="cpasssword" value="@21061AdminDefault" name="confirm-password" autocomplete="off" />
            </div>
            <!--end::Input group-->
            <!--begin::Input group-->
            <div class="fv-row mb-10">
                <label class="form-check form-check-custom form-check-solid form-check-inline">
                     {{ form_row(registrationForm.agreeTerms, {'attr': {'class': 'form-check-input','type' : 'checkbox', value: 1,' placeholder': '..........' }}) }}
                    <span class="form-check-label fw-bold text-gray-700 fs-6">{% trans %}J'accepte {% endtrans %}
                    <a href="#" class="ms-1 link-primary">{% trans %}les termes et conditions d'utilisation.</a>{% endtrans %}</span>
                </label>
            </div>
            <!--end::Input group-->
            <!--begin::Actions-->
            <div class="text-center">
                <button type="submit" id="kt_sign_up_submit" class="btn btn-lg btn-primary">
                    <span class="indicator-label">{% trans %}Enrégistrer{% endtrans %}</span>
                    <span class="indicator-progress">{% trans %}Patienter...{% endtrans %}
                    <span class="spinner-border spinner-border-sm align-middle ms-2"></span></span>
                </button>
            </div>
            <!--end::Actions-->
        {{ form_end(registrationForm) }}
        <!--end::Form-->
    </div>
    <!--end::Wrapper-->#}
    <div class="login-box panel panel-signup transbox panel-radius" >
        <ul class="" style="text-align: right !important; margin-right: 0px !important; list-style: none !important; margin-bottom: -15px;" >
            <li class="nav-item dropdown u-pro">
                <a class="nav-link dropdown-toggle waves-effect waves-dark profile-pic" id="textMH" href="javascript:void(0)" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <span class=""  id="MHLang" >
                        {% if _locale == 'fr' %}
                            <img src="{{ asset('app/media/flags/france.svg') }}"  width="20" height="15" alt="sms en ligne">FR
                        {% else %}
                            <img src="{{ asset('app/media/flags/england.svg') }}"  width="20" height="15" alt="sms en ligne"> EN
                        {% endif %}
                    </span>
                </a>
                <div class="dropdown-menu dropdown-menu-right animated flipInY" id="BackMHdrop" >
                    <!-- text-->
                    {% set route = app.request.attributes.get('_route') %}
                    {% if _locale == 'fr' %}
                        <a href="{{ path(route , {_locale: 'en'}) }}" class="dropdown-item" id="textBackMHdrop1" style="color: #337ab7;">
                            <img src="{{ asset('app/media/flags/england.svg') }}"  width="13" height="12" alt="sms en ligne">
                            {% trans %} Anglais{% endtrans %}
                        </a>
                    {% else %}
                        <a href="{{ path(route , {_locale: 'fr'}) }}" class="dropdown-item" id="textBackMHdrop2">
                            <img src="{{ asset('app/media/flags/france.svg') }}"  width="13" height="12" alt="fastermessage en française">
                            {% trans %} Français{% endtrans %}
                        </a>
                    {% endif %}
                </div>
            </li>
        </ul>
        <div class="white-box panel-body" id="bodyFormOpen" style="color:#000; display: none;">
            <h3 class="box-title text-center" style="color: #1C447C;">{% trans %}OUVERTURE DE COMPTE{% endtrans %}</h3>
            <div id="bad_response" style="display:none;" class="text-danger text-center"></div>
            <button id="good_response" style="display:none;" class="btn btn-success btn-block"></button>
                <form id="form_open_account" method="POST">
                <div class="form-group text-success" id="messageregister" style="display: none !important; ">
                    <div class="col-xs-12 alert-success" style="padding: 8px; margin-bottom: 8px;">
                        {% trans %}Votre compte a été bien créé. Veuillez consulter votre boite mail ou spam pour valider votre compte. Merci !{% endtrans %}
                    </div>
                </div>
                <div class="alert alert-danger text-center" id="messageregistererror" style="display: none !important;" role="alert">
                   
                </div>
                <div class="form-group">
                    <input type="hidden" value="" name="lien" id="lien">
                    <div class="col-xs-12">
                        {{ form_row(registrationForm.email,{ attr:{'placeholder':"Email" | trans}}) }}
                        <data-error="Mot de passe fort requis - 8 caractère minimum">
                        <div class="help-block with-errors"></div>
                    </div>
                </div>
                <div class="form-group">
                    <input type='hidden' name='phonecode' id='phonecode'>
                    <div class="col-xs-12">
                    {{ form_row(registrationForm.phone,{ attr:{'placeholder': "Téléphone" | trans} }) }}
                    <data-error="Mot de passe fort requis - 8 caractère minimum">
                    <div class="help-block with-errors"></div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-xs-12">
                        {{ form_row(registrationForm.plainPassword,{ attr:{'placeholder':"Mot de passe" | trans}} ) }}
                        <data-error="Mot de passe fort requis - 8 caractère minimum">
                        <div class="help-block with-errors"></div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-xs-12">
                        {{ form_row(registrationForm.confirm_password,{ attr:{'placeholder':'Confirmer mot de passe' | trans }}) }}
                        <data-error="Mot de passe fort requis - 8 caractère minimum">
                        <div class="help-block with-errors"></div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-xs-12">
                        {{ form_row(registrationForm.agreeTerms, {'attr': {'class': 'form-check-input','type' : 'checkbox', value: 1,' placeholder': '..........' }}) }}
                        <span>{% trans %}J'accepte les{% endtrans %} <a href="https://fastermessage.com/cgv.html" target="_blank">{% trans %} conditions d'utilisations{% endtrans %}</a>.</span>
                        <data-error="Mot de passe fort requis - 8 caractère minimum">
                        <div class="help-block with-errors"></div>
                    </div>
                </div>

                <div class="form-group text-center m-t-20">
                    <div class="col-xs-12">
                        <button id="loginLoaderopen" class="btn btn-md btn-block text-uppercase waves-effect waves-light btn_open_account"
                        style="background-color : #33B4F0;color : white;" type="submit">{% trans %}Créer mon compte{% endtrans %}</button>
                        <button id="AccountProcessopen" class="btn btn-warning btn_open_account"
                        style="width: 100%; display: none; cursor: text;" type="button">
                        <i class="fas fa-spin fa-spinner"></i> {% trans %} En cours{% endtrans %}</button>

                    </div>
                </div>
                <div class="form-group m-b-0">
                <div class="col-sm-12 text-center">
                    <p>{% trans %}Avez vous déjà un compte ?{% endtrans %}<a href="javascript:void(0)" id="viewAllLogin" class="text-info m-l-5">
                        <b>{% trans %}Se connecter{% endtrans %}</b>
                        </a>
                    </p>
                </div>
            </div>
            {{ form_end(registrationForm) }}
        </div>


        <div class="white-box panel-body" id="bodyLogin" style="color:#000;">
            <h3 class="box-title text-center" style="color: #1C447C;">{% trans %}Connexion{% endtrans %}</h3>
            {% if error %}
            <div class="alert alert-danger text-center" role="alert">
                {{ error.messageKey |trans(error.messageData, 'security')}}
            </div>
            {% endif %}

            {% for message in app.flashes('error') %}
                <div class="alert alert-danger text-center" role="alert">
                {{ message}}
            </div>  
            {% endfor %}
            <div id="bodyFormLogin">
                <form method="POST" id="login_users" action="{{ path('app_login') }}">
                    <div class="form-group text-success" id="successlogin" style="display: none";>
                    </div>
                    <div class="form-group" style="margin-top: 25px;">
                        <div class="col-xs-12">
                        <input type="text" class="form-control input-radius" name="email" placeholder="Email" value="{{brand.emails.support}}" required>
                        <input type="hidden" name="_csrf_token"  value="{{ csrf_token('authenticate') }}">
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-xs-12">
                            <input type="password" class="form-control input-radius" name="password" value="@21061AdminDefault" placeholder="Password" | trans required>
                        </div>
                        <div class="col-xs-12" style="color : #33B4F0; padding-top: 20px;">
                            <a href="javascript:void(0)" id="goReset"><b>{% trans %}Mot de passe oublié{% endtrans %} ?</b></a>
                        </div>
                    </div>
                    <div class="form-group text-center m-t-20">
                        <div class="col-xs-12">
                            <button id="loginLoaderForm" class="btn btn-md btn-block text-uppercase waves-effect waves-light"
                            style="background-color : #33B4F0;color : white;" type="submit">{% trans %}Se connecter{% endtrans %}</button>
                            <button id="PendingLogin" class="btn btn-warning btn_open_account" style=" display: none; width: 100%; cursor: text;" type="button">
                            <i class="fas fa-spin fa-spinner"></i> {% trans %}En cours . . .{% endtrans %}</button>
                        </div>
                    </div>
                    <div class="col-sm-12 text-center">
                        <p>{% trans %}Vous n'avez pas encore un compte{% endtrans %} ?
                            <a href="javascript:void(0)" class="text-info m-l-5"><b id="viewOpenAccount">{% trans %}Créer un compte{% endtrans %}</b></a>
                        </p>
                    </div>
                </form>
            </div>
        </div>


        <div class="white-box panel-body" id="bodyFormReset" style="display: none; color: #000;">
            <h3 class="box-title text-center" style="color: #1C447C;">{% trans %}RESTAURATION DE VOTRE MOT DE PASSE{% endtrans %}</h3>
            <div id="bad_response" style="display:none;" class="alert-danger text-center"></div>
            <button id="good_response" style="display:none;" class="btn btn-success btn-block"></button>
            <form method="POST" id="formReset">
                <div class="form-group alert-danger" id="errorresetmessage" style="display: none; padding: 8px;">
                    {% trans %}Vous n'existez pas dans le système.{% endtrans %} <b>{% trans %}cliquez{% endtrans %}-<a href="javascript:void(0)"><b id="viewOpenAccount1">{% trans %}ici{% endtrans %}</b></a></span> {% trans %}pour créer un compte.{% endtrans %}
                </div>
                <div class="form-group alert-success" id="successresetmessage" style="display: none";>
                    {% trans %}Un mail de réinitialisation a été envoyé à votre email. Veuillez cliquer sur le lien pour
                        définir un nouveau mot de passe.{% endtrans %}
                </div>
                <div class="form-group">
                    <div class="col-xs-12">
                        <input type="hidden" value="" name="lienrestore" id="lienrestore">
                        {#{{ form_row(formReset.email,{  attr:{'placeholder':"Email" | trans, 'class':"input-radius"  }}) }}#}
                        <div class="help-block with-errors"></div>
                    </div>
                </div>
                <div class="form-group text-center m-t-20">
                    <div class="col-xs-12">
                        <button id="successReset" class="btn btn-md btn-block text-uppercase waves-effect waves-light"
                        style="background-color : #33B4F0;color : white;" type="submit">{% trans %}Restaurer{% endtrans %}</button>
                        <button id="PendingReset" class="btn btn-warning btn_open_account"
                        style="width: 100%; display: none; cursor: text;" type="button">
                        <i class="fa fa-spin fa-spinner"></i> {% trans %}En cours . . .{% endtrans %}</button>
                    </div>
                </div>
                <div class="col-sm-12 text-center">
                    <p>{% trans %}Vous avez un compte ?{% endtrans %}
                        <a class="text-info m-l-5" href="javascript:void(0)"><b id="viewLogin">{% trans %}Se connecter{% endtrans %}</b></a>
                    </p>
                </div>
            </form>
        </div>
    </div>
    
{% endblock %}

{% block javascripts %} 
<!--begin::Page Custom Javascript(used by this page)-->
    <script>
        const register_url = "{{path('app_register')}}";
        const login_url    = "{{path('app_login', {'slug': 'login'})}}";
    </script>
	<!--end::Page Custom Javascript-->
    <script>
			var flashErrors		=  	$('#flashErrors').val();
			var flashMessages	=  	$('#flashMessages').val();

			if(flashErrors 	!= 	undefined)
			{
				$(document).trigger('ajaxErrorLogin');
                $('#errorlogin').show();
                $('#login_users')[0].reset();
			}

			if(flashMessages != 	undefined)
			{
				$(document).trigger('ajaxErrorLogin');
                $('#errorlogin').show();
                $('#login_users')[0].reset();
			}
    	</script>
{% endblock %}