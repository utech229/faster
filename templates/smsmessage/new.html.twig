<!--begin::Modals-->
{% block stylesheets %}
<style media="screen">
.rotate-270{
	-ms-transform: rotate(270deg); /* IE 9 */
	transform: rotate(270deg);
}
</style>
{% endblock %}
<!--begin::Modal - Sender-->
<div class="modal fade" id="modal_message" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-hidden="true">
    <!--begin::Modal dialog-->
    <div class="modal-dialog modal-dialog-centered mw-750px">
        <!--begin::Modal content-->
        <div class="modal-content">
            <!--begin::Form-->
            <form class="form" action="{{path("message_sms_create")}}" id="message_form" method="post">
                <input type="hidden" name="_token" value="{{csrf_token('messageCreate')}}"/>
                <!--begin::Modal header-->
                <div class="modal-header" id="message_modal_header">
                    <!--begin::Modal title-->
                    <h2 class="fw-bolder" id="title">{% trans %}Envoyer un message{% endtrans %}</h2>
                    <!--end::Modal title-->
                    <!--begin::Close-->
                    <div class="btn btn-icon btn-sm btn-active-icon-primary" id="close">
                        <!--begin::Svg Icon | path: icons/duotune/arrows/arr061.svg-->
                        <span class="svg-icon svg-icon-1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="currentColor" />
                                <rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="currentColor" />
                            </svg>
                        </span>
                        <!--end::Svg Icon-->
                    </div>
                    <!--end::Close-->
                </div>
                <!--end::Modal header-->
                <!--begin::Modal body-->
                <div class="modal-body row scroll-y mx-5 my-5"  id="message_modal_scroll" data-kt-scroll="true" data-kt-scroll-activate="{default: false, lg: true}" data-kt-scroll-max-height="auto" data-kt-scroll-dependencies="#message_modal_header" data-kt-scroll-wrappers="#message_modal_scroll" data-kt-scroll-offset="300px">
                    <!--begin::Input group-->
                    <div class="fv-row mb-10 col-md-6">
                        <!--begin::Label-->
                        <label class="fs-7 fw-bolder form-label mb-2 required" for="brand">
                            {{"Marque blanche"|trans}}
                        </label>
                        <!--end::Label-->
                        <!--begin::Input-->
                        <select name="brand" class="form-select form-select-solid fw-bolder" data-kt-select2="true" data-placeholder="{{"Choisissez la marque"}}" data-allow-clear="true" data-control="select2" data-dropdown-parent='#modal_message' id="brand_message">
                            <option value="">{{"Toutes"|trans}}</option>
                            {% for brand in brands %}
                                <option value="{{ brand.uid }}" data-select2-avatar="{{asset('app/uploads/brands/logos/' ~ brand.logo)}}" data-select2-alt="{{brand.name}}">{{ brand.name }}</option>
                            {% endfor %}
                        </select>
                        <!--end::Input-->
                    </div>
                    <!--end::Input group-->
                    <!--begin::Input group-->
                    <div class="fv-row mb-10 col-md-6">
                        <!--begin::Label-->
                        <label class="fs-7 fw-bolder form-label mb-2 required" for="user">
                            {{"Utilisateur de la marque"|trans}}
                        </label>
                        <!--end::Label-->
                        <!--begin::Input-->
                        <select name="user" class="form-select form-select-solid fw-bolder" data-kt-select2="true" data-placeholder="{{"Choisissez l'utilisateur"}}" data-control="select2" data-dropdown-parent='#modal_message' data-allow-clear="true" id="user_message">
                        </select>
                        <!--end::Input-->
                    </div>
                    <!--end::Input group-->
                    <!--begin::Input group-->
                    <div class="fv-row mb-10 col-md-4">
                        <!--begin::Label-->
                        <label class="fs-7 fw-bolder form-label mb-2 required" for="sender">
                            {{"Expéditeur"|trans}}
                        </label>
                        <!--end::Label-->
                        <!--begin::Input-->
                        <select name="sender" class="form-select form-select-solid fw-bolder" data-kt-select2="true" data-placeholder="{{"Choisissez l'expéditeur"}}" data-control="select2" data-dropdown-parent='#modal_message' data-allow-clear="true" id="sender_message">
                        </select>
                        <!--end::Input-->
                    </div>
                    <!--end::Input group-->
                    <!--begin::Input group-->
                    <div class="fv-row mb-10 col-md-4">
                        <!--begin::Label-->
                        <label class="fs-7 fw-bolder form-label mb-2 required" for="type">
                            {{"Type de SMS"|trans}}
                        </label>
                        <!--end::Label-->
                        <!--begin::Input-->
                        <select id="type_message" name="type" class="form-select form-select-solid fw-bolder" data-placeholder="{{"Sélectionnez le type du SMS" | trans}}" data-control="select2" data-dropdown-parent='#modal_message' data-hide-search='true' required>
                            <option value="1">{{ "SMS Classique"|trans }}</option>
                            <option value="0">{{ "SMS Flash"|trans }}</option>
                        </select>
                        <!--end::Input-->
                    </div>
                    <!--end::Input group-->
                    <!--begin::Input group-->
                    <div class="fv-row mb-10 col-md-4">
                        <!--begin::Label-->
                        <label class="fs-7 fw-bolder form-label mb-2" for="timezone">
                            {{"Fuseau horaire"|trans}}
                        </label>
                        <!--end::Label-->
                        <!--begin::Input-->
                        <select id="timezone_message" name="timezone" data-allow-clear="false" data-control="select2" class="form-select form-select-solid fw-bolder" data-placeholder="{{"Sélectionnez le Fuseau horaire" | trans}}" data-control="select2" data-dropdown-parent='#modal_message'>
                            <option value="-12:00">(GMT -12:00)</option>
                            <option value="-11:00">(GMT -11:00)</option>
                            <option value="-10:00">(GMT -10:00)</option>
                            <option value="-09:30">(GMT -9:30)</option>
                            <option value="-09:00">(GMT -9:00)</option>
                            <option value="-08:00">(GMT -8:00)</option>
                            <option value="-07:00">(GMT -7:00)</option>
                            <option value="-06:00">(GMT -6:00)</option>
                            <option value="-05:00">(GMT -5:00)</option>
                            <option value="-04:30">(GMT -4:30)</option>
                            <option value="-04:00">(GMT -4:00)</option>
                            <option value="-03:30">(GMT -3:30)</option>
                            <option value="-03:00">(GMT -3:00)</option>
                            <option value="-02:00">(GMT -2:00)</option>
                            <option value="-01:00">(GMT -1:00)</option>
                            <option value="+00:00">(GMT)</option>
                            <option value="+01:00">(GMT +1:00)</option>
                            <option value="+02:00">(GMT +2:00)</option>
                            <option value="+03:00">(GMT +3:00)</option>
                            <option value="+03:30">(GMT +3:30)</option>
                            <option value="+04:00">(GMT +4:00)</option>
                            <option value="+04:30">(GMT +4:30)</option>
                            <option value="+05:00">(GMT +5:00)</option>
                            <option value="+05:50">(GMT +5:30)</option>
                            <option value="+05:75">(GMT +5:45)</option>
                            <option value="+06:00">(GMT +6:00)</option>
                            <option value="+06:30">(GMT +6:30)</option>
                            <option value="+07:00">(GMT +7:00)</option>
                            <option value="+08:00">(GMT +8:00)</option>
                            <option value="+08:75">(GMT +8:45)</option>
                            <option value="+09:00">(GMT +9:00)</option>
                            <option value="+09:30">(GMT +9:30)</option>
                            <option value="+10:00">(GMT +10:00)</option>
                            <option value="+10:50">(GMT +10:30)</option>
                            <option value="+11:00">(GMT +11:00)</option>
                            <option value="+11:30">(GMT +11:30)</option>
                            <option value="+12:00">(GMT +12:00)</option>
                            <option value="+12:75">(GMT +12:45)</option>
                            <option value="+13:00">(GMT +13:00)</option>
                            <option value="+14:00">(GMT +14:00)</option>
                        </select>
                        <!--end::Input-->
                    </div>
                    <!--end::Input group-->
                    <!--begin::Input group-->
                    <div class="fv-row mb-10 col-md-6">
                        <!--begin::Label-->
						<span class="clearfix">
							<label class="fs-7 fw-bolder form-label mb-2 float-start" for="datetime">
								{{"Date et heure d'envoi"|trans}}
								<i class="fas fa-exclamation-circle ms-1 fs-7" data-bs-toggle="tooltip" title="" data-bs-original-title="{{"Laissez vide pour créer une campagne instantanée."|trans}}" aria-label="{{"Laissez vide pour créer une campagne instantanée."|trans}}"></i>
							</label>
							<span class="float-end me-5 rotate-270" id="clear" data-bs-toggle="tooltip" title="" data-bs-original-title="{{"Vidé le champ."|trans}}" aria-label="{{"Vidé le champ."|trans}}"><i class="bi bi-backspace-fill"></i></span>
						</span>
                        <!--end::Label-->
                        <!--begin::Input-->
                        <input class="form-control form-control-solid" placeholder="{{"Gardez vide pour l'envoi instantané."|trans}}" id="datetime_message" name="datetime"/>
                        <!--end::Input-->
                    </div>
                    <!--end::Input group-->
                    <!--begin::Input group-->
                    <div class="fv-row mb-10 col-md-6">
                        <!--begin::Label-->
                        <label class="fs-7 fw-bolder form-label mb-2" for="message_phone">
                            {{"Téléphone"|trans}}
                        </label>
                        <!--end::Label-->
                        <!--begin::Input-->
                        <input type="tel" id="message_phone" name="message_phone" class="form-control form-control-solid fw-bolder tel"/>
                        <!--end::Input-->
                    </div>
                    <!--end::Input group-->
                    <!--begin::Input group-->
                    <div class="fv-row mb-10 col-lg-6">
                        <!--begin::Label-->
                        <label class="fs-7 fw-bolder form-label mb-2 required" for="message">
                            {{"Message"|trans}}
                        </label>
                        <!--end::Label-->
                        <!--begin::Input-->
                        <textarea name="message" id="message_message" rows="8" cols="80" class="form-control form-control-solid" placeholder="{{"Vous pouvez utiliser des paramètres dans le message"|trans}}" required></textarea>
                        <!--end::Input-->
                    </div>
                    <!--end::Input group-->
                    <!--begin::Input group-->
                    <div class="fv-row mb-10 col-lg-6">
                        <!--begin::Label-->
                        <label class="fs-7 fw-bolder form-label mb-2 required" for="true_message">
                            {{"Aperçu du message à envoyer"|trans}}
                        </label>
                        <!--end::Label-->
                        <!--begin::Input-->
                        <textarea id="true_message_message" rows="8" cols="80" class="form-control form-control-solid" disabled></textarea>
                        <!--end::Input-->
                        <p id="countThree">
                            <span class="text-danger fs-8"><span id="countMessage">0</span> {{"caractère(s)"|trans}} </span>
                            <span class="text-gray-800 fs-8"> <span id="countPageMessage">0</span> {{"page(s)"|trans}}</span>
                        </p>
                    </div>
                    <!--end::Input group-->
                </div>
                <!--end::Modal body-->
                <div class="modal-body">
                    <!--begin::Actions-->
                    <div class="text-center w-100">
                        <button type="button" class="btn btn-light me-3" id="cancel">{{'Annuler'| trans}}</button>
                        <button type="submit" class="btn btn-primary" id="submit">
                            <span class="indicator-label">{{'Soumettre'| trans}}</span>
                            <span class="indicator-progress">{{'Veuillez patienter'| trans}}...
                            <span class="spinner-border spinner-border-sm align-middle ms-2"></span></span>
                        </button>
                    </div>
                    <!--end::Actions-->
                </div>
            </form>
            <!--end::Form-->
        </div>
        <!--end::Modal content-->
    </div>
    <!--end::Modal dialog-->
</div>
<!--end::Modal - sender-->
<!--end::Modals-->
<script type="text/javascript">
    const loadPage = "{{"Voulez-vous voir les messages envoyés ?"|trans}}";

    const url_message = "{{path("message_sms")}}";
</script>
<script src="{{asset("app/js/queries/sms/message.js")}}"></script>
